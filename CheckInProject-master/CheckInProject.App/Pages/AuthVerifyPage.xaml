<Page x:Class="CheckInProject.App.Pages.AuthVerifyPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:CheckInProject.App.Pages"
      xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="900"
      Title="AuthVerifyPage"
      DataContext="{Binding RelativeSource={RelativeSource Self}}">

    <Grid Background="Black">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 全屏摄像头画面 -->
        <Image Grid.Row="0" Grid.RowSpan="2" 
               x:Name="CameraImage" 
               Source="{Binding SourceImage}" 
               Stretch="Uniform"
               HorizontalAlignment="Center" 
               VerticalAlignment="Center"/>

        <!-- 顶部状态栏 -->
        <Border Grid.Row="0" 
                Background="#AA000000" 
                Padding="20,15"
                VerticalAlignment="Top">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <wpfui:SymbolIcon Symbol="Shield24" FontSize="24" Margin="0,0,10,0"
                                      Foreground="{DynamicResource SystemFillColorSuccessBrush}"/>
                    <TextBlock Text="权限验证" FontSize="20" FontWeight="SemiBold" 
                               VerticalAlignment="Center" Foreground="White"/>
                </StackPanel>

                <TextBlock Grid.Column="1" 
                           Text="{Binding StatusMessage}" 
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           FontSize="16"
                           Foreground="White"/>

                <TextBlock Grid.Column="2" 
                           Text="ESC 退出" 
                           VerticalAlignment="Center"
                           FontSize="14"
                           Opacity="0.7"
                           Foreground="White"/>
            </Grid>
        </Border>

        <!-- 底部提示信息 -->
        <Border Grid.Row="1" 
                Background="#AA000000" 
                Padding="20,15">
            <StackPanel HorizontalAlignment="Center">
                <TextBlock Text="{Binding HintMessage}" 
                           FontSize="18"
                           Foreground="White"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding TargetUserText}" 
                           FontSize="14"
                           Margin="0,5,0,0"
                           Foreground="{DynamicResource SystemAccentColorBrush}"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- 权限不足提示 -->
        <Border Grid.Row="0" Grid.RowSpan="2"
                Background="#AA000000"
                Visibility="{Binding ShowDeniedMessage, Converter={StaticResource BooleanToVisibilityConverter}}"
                Panel.ZIndex="100">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <wpfui:SymbolIcon Symbol="ShieldError24" FontSize="80" 
                                  Foreground="{DynamicResource SystemFillColorCriticalBrush}"/>
                <TextBlock Text="{Binding DeniedUserText}" 
                           FontSize="32" 
                           FontWeight="Bold"
                           Foreground="White"
                           Margin="0,20,0,0"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="权限不够" 
                           FontSize="24" 
                           Foreground="{DynamicResource SystemFillColorCriticalBrush}"
                           Margin="0,10,0,0"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- 权限通过提示 -->
        <Border Grid.Row="0" Grid.RowSpan="2"
                Background="#AA000000"
                Visibility="{Binding ShowGrantedMessage, Converter={StaticResource BooleanToVisibilityConverter}}"
                Panel.ZIndex="100">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <wpfui:SymbolIcon Symbol="ShieldCheckmark24" FontSize="100" 
                                  Foreground="{DynamicResource SystemFillColorSuccessBrush}"/>
                <TextBlock Text="权限通过" 
                           FontSize="40" 
                           FontWeight="Bold"
                           Foreground="White"
                           Margin="0,20,0,0"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding GrantedUserText}" 
                           FontSize="28" 
                           Foreground="{DynamicResource SystemFillColorSuccessBrush}"
                           Margin="0,10,0,0"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>
